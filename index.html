<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>POC - 100</title>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />
  <link rel="stylesheet" href="assets/css/style.css" />
  <style>
    .ai-toolbar {
      border: 1px solid var(--cor-texto-claro);
      border-radius: 10px;
      padding: 16px;
      margin-bottom: 20px;
      display: grid;
      gap: 16px;
      background: var(--cor-cinza-fundo);
    }

    .ai-toolbar__actions {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
    }

    .ai-gear {
      border: 1px solid var(--cor-texto-claro);
      background: var(--cor-cinza-fundo);
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      color: var(--cor-texto-escuro);
    }

    .ai-toolbar__inputs {
      display: grid;
      gap: 12px;
    }

    .ai-mode__buttons {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .ai-mode-btn {
      border: 1px solid var(--cor-texto-claro);
      background: var(--cor-cinza-fundo);
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      color: var(--cor-texto-escuro);
    }

    .ai-mode-btn.is-active {
      background: var(--cor-primaria);
      color: var(--cor-cinza-fundo);
      border-color: var(--cor-primaria);
    }

    .ai-file-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
    }

    .ai-status {
      margin: 0;
      font-size: 0.9rem;
      color: var(--cor-texto-claro);
    }

    .ai-options-panel {
      border-top: 1px dashed var(--cor-texto-claro);
      padding-top: 12px;
      display: grid;
      gap: 12px;
    }

    .ai-toggle {
      flex-direction: row;
      align-items: center;
      gap: 8px;
    }

    .ai-options-actions {
      display: flex;
      justify-content: flex-start;
    }

    .ai-privacy {
      font-size: 0.85rem;
      color: var(--cor-texto-claro);
      margin: 0;
    }

    .ai-log {
      border-left: 4px solid var(--cor-texto-claro);
      padding: 8px 12px;
      background: #f7f7f7;
      border-radius: 6px;
      font-size: 0.85rem;
      color: var(--cor-texto-escuro);
    }

    .ai-log:empty {
      display: none;
    }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
</head>
<body>
  <header class="app-header">
    <div class="container header-content">
      <img src="assets/css/logo.png" alt="Logo Wwin Safety" class="logo" />
      <divc class="header-title">
        <h1>P.O.C 100</h1>
      </div>
    </div>
  </header>

  <main class="container app-main">
    <section class="view-toggle" aria-label="Ações principais">
      <button type="button" class="tab-button is-active" data-view="cadastrar">Cadastrar</button>
      <button type="button" class="tab-button" data-view="consultar">Consultar</button>
    </section>

    <section class="view-panel is-active" data-view-panel="cadastrar">
      <form id="poc-form" novalidate>
        <div class="ai-toolbar" aria-label="Assistente de preenchimento por IA">
          <div class="ai-toolbar__actions">
            <button type="button" id="ai-fill-btn" class="primary" disabled>Preencher cartão de POC</button>
            <button type="button" id="ai-options-toggle" class="ai-gear" aria-expanded="false" aria-controls="ai-options-panel">⚙️ Opções IA</button>
          </div>
          <div class="ai-toolbar__inputs">
            <div class="ai-mode">
              <span class="ai-label"><strong>Origem das imagens</strong></span>
              <div class="ai-mode__buttons" role="group" aria-label="Modo de captura">
                <button type="button" class="ai-mode-btn" data-mode="camera">Câmera</button>
                <button type="button" class="ai-mode-btn" data-mode="gallery">Galeria</button>
              </div>
            </div>
            <div class="ai-file-grid">
              <label>Frente do cartão
                <input type="file" id="ai-front-file" accept="image/*" />
              </label>
              <label>Verso do cartão
                <input type="file" id="ai-back-file" accept="image/*" />
              </label>
            </div>
            <p id="ai-status" class="ai-status" aria-live="polite"></p>
          </div>
          <div id="ai-options-panel" class="ai-options-panel" hidden>
            <label>Gemini API Key
              <input type="password" id="ai-api-key" placeholder="Cole sua chave da API" autocomplete="off" />
            </label>
            <label class="ai-toggle">
              <input type="checkbox" id="ai-enabled" />
              Modo IA
            </label>
            <div class="ai-options-actions">
              <button type="button" id="ai-save-settings" class="primary">Salvar</button>
            </div>
            <p class="ai-privacy">As imagens são enviadas ao Gemini para leitura e preenchimento; você pode desligar o modo IA quando quiser.</p>
          </div>
          <div id="ai-log" class="ai-log" aria-live="polite"></div>
        </div>
        <div class="tabs" role="tablist">
          <button type="button" class="tab is-active" data-tab="basicos" role="tab" aria-selected="true">Dados Básicos</button>
          <button type="button" class="tab is-disabled" data-tab="inseguras" role="tab" aria-selected="false" aria-disabled="true">Práticas / Condição Inseguras</button>
          <button type="button" class="tab is-disabled" data-tab="seguras" role="tab" aria-selected="false" aria-disabled="true">Reconhecimento de Prática Segura</button>
        </div>

        <div class="tab-panel is-active" data-tab-panel="basicos" role="tabpanel">
          <h2>Dados Básicos</h2>
          <div class="form-grid">
            <label><strong>Unidade*</strong>
              <select id="unidadeSelect" required>
                <option value="">Selecione</option>
                <option value="Vespasiano">Vespasiano</option>
                <option value="Porto Açu">Porto Açu</option>
                <option value="Contagem">Contagem</option>
              </select>
            </label>
            <label><strong>Setor*</strong>
              <select id="setorSelect" required disabled>
                  <option value="">Selecione</option>
              </select>
            </label>
            <label><strong>Subsetor*</strong>
              <select id="subsetorSelect" required disabled>
                <option value="">Selecione</option>
              </select>
            </label>
            <label><strong>Observador*</strong>
              <select id="observador" required>
                <option value="">Selecione</option>
                <option value="davi">Davi</option>
                <option value="brayan">Brayan</option>
                <option value="samuel">Samuel</option>
                <option value="lucas">Lucas</option>
                <option value="walef">Walef</option>
                <option value="welington">Welington</option>
                <option value="eder">Eder</option>
                <option value="guilherme">Guilherme</option>
                <option value="humberto">Humberto</option>
                <option value="wagner">Wagner</option>
              </select>
            </label>
            <label>Acompanhante
              <select id="acompanhante">
                <option value="">Selecione</option>
                <option value="davi">Davi</option>
                <option value="brayan">Brayan</option>
                <option value="samuel">Samuel</option>
                <option value="lucas">Lucas</option>
                <option value="walef">Walef</option>
                <option value="welington">Welington</option>
                <option value="eder">Eder</option>
                <option value="guilherme">Guilherme</option>
                <option value="humberto">Humberto</option>
                <option value="wagner">Wagner</option>
              </select>
            </label>
            <label><strong>Data*</strong>
              <input type="date" id="data" required />
            </label>
            <label><strong>Hora*</strong>
              <input type="time" id="hora" required />
            </label>
            <label><strong>Pessoas Observadas*</strong>
              <input type="number" id="pessoas-observadas" min="1" required />
            </label>
            <label><strong>Pessoas na Área*</strong>
              <input type="number" id="pessoas-area" min="1" required />
            </label>
          </div>

          <fieldset class="radio-group">
            <legend><strong>Tipo de registro*</strong></legend>
            <label>
              <input type="radio" name="tipo-registro" value="insegura" required />
              Prática / Condição Insegura
            </label>
            <label>
              <input type="radio" name="tipo-registro" value="segura" required />
              Reconhecimento de Prática Segura
            </label>
          </fieldset>
        </div>

        <div class="tab-panel" data-tab-panel="inseguras" role="tabpanel">
          <h2>Práticas / Condição Inseguras</h2>
          <div class="unsafe-layout">
            <div class="unsafe-fields">
              <label><strong>Categoria*</strong>
                <select id="categoriaInseguraSelect" required>
                  <option value="">Selecione</option>
                </select>
              </label>
              <label><strong>Subcategoria*</strong>
                <select id="subcategoriaInseguraSelect" required>
                  <option value="">Selecione</option>
                </select>
              </label>
            </div>
          </div>
        </div>

        <div class="tab-panel" data-tab-panel="seguras" role="tabpanel">
          <h2>Reconhecimento de Prática Segura</h2>
          <label><strong>Reconhecimento do Trabalho Seguro*</strong>
            <textarea id="reconhecimento" rows="4" required></textarea>
          </label>
          <label>Observação
            <textarea id="observacao" rows="3"></textarea>
          </label>
        </div>

        <div class="form-actions">
          <button type="button" id="add-btn" class="primary" disabled>Adicionar</button>
        </div>
      </form>
    </section>

    <section class="view-panel" data-view-panel="consultar">
      <div class="consultar">
        <h2>Consultar POC</h2>
        <div class="form-grid">
          <label><strong>Unidade*</strong>
              <select id="unidade-consulta" required>
                <option value="">Selecione</option>
                <option value="vespasiano">Vespasiano</option>
                <option value="portoacu">Porto Açu</option>
                <option value="contagem">Contagem</option>
              </select>
            </label>
            <label><strong>Setor*</strong>
              <select id="setor-consulta" required>
                  <option value="">Selecione</option>
                  <option value="administrativo">Administrativo</option>
                  <option value="caldeiraria">Caldeiraria</option>
                  <option value="montagem">Montagem</option>
                  <option value="usinagem">Usinagem</option>
                  <option value="manutencao">Manutenção</option>
              </select>
            </label>
            <label><strong>Subsetor*</strong>
              <select id="subsetor-consulta" required>
                <option value="">Selecione</option>
                <option value="fiscal">Fiscal</option>
                <option value="financeiro">Financeiro</option>
                <option value="gg">GG</option>
                <option value="inovacao">Inovação</option>
                <option value="ti">TI</option>
                <option value="facilities">Facilities</option>
                <option value="almoxarifado">Almoxarifado</option>
                <option value="ems">EMS</option>
                <option value="pcp">PCP</option>
                <option value="ambulatorio">Ambulatório</option>
              </select>
            </label>
            <label><strong>Observador*</strong>
              <select id="observador" required>
                <option value="">Selecione</option>
                <option value="davi">Davi</option>
                <option value="brayan">Brayan</option>
                <option value="samuel">Samuel</option>
                <option value="lucas">Lucas</option>
                <option value="walef">Walef</option>
                <option value="welington">Welington</option>
                <option value="eder">Eder</option>
                <option value="guilherme">Guilherme</option>
                <option value="humberto">Humberto</option>
                <option value="wagner">Wagner</option>
              </select>
            </label>
            <label>Acompanhante
              <select id="acompanhante">
                <option value="">Selecione</option>
                <option value="davi">Davi</option>
                <option value="brayan">Brayan</option>
                <option value="samuel">Samuel</option>
                <option value="lucas">Lucas</option>
                <option value="walef">Walef</option>
                <option value="welington">Welington</option>
                <option value="eder">Eder</option>
                <option value="guilherme">Guilherme</option>
                <option value="humberto">Humberto</option>
                <option value="wagner">Wagner</option>
              </select>
            </label>
          <label>Data início
            <input type="date" id="filtro-data-inicio" />
          </label>
          <label>Data fim
            <input type="date" id="filtro-data-fim" />
          </label>
          <label>Hora início
            <input type="time" id="filtro-hora-inicio" />
          </label>
          <label>Hora fim
            <input type="time" id="filtro-hora-fim" />
          </label>
        </div>
        <div class="form-actions">
          <button type="button" id="consultar-btn" class="primary">Consultar</button>
        </div>
        <div id="consulta-resultado" class="consulta-resultado" aria-live="polite"></div>
      </div>
    </section>
  </main>

  <div class="modal fade" id="requiredFieldsModal" tabindex="-1" aria-labelledby="requiredFieldsModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="requiredFieldsModalLabel">Campos obrigatórios</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
        </div>
        <div class="modal-body">
          <p>
            Para continuar, preencha todos os campos obrigatórios (*) da etapa atual.
            Depois disso, você poderá avançar de aba ou clicar em Adicionar.
          </p>
          <ul id="requiredFieldsList" class="mb-0 d-none"></ul>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Entendi</button>
        </div>
      </div>
    </div>
  </div>

  <script
    src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
  <script>
    const MAP = {
      Vespasiano: {
        Administrativo: [
          'Comercial',
          'diretoria',
          'Engenharia de Aplicações e Vendas',
          'Facilites',
          'Financeiro',
          'Gente e Gestão',
          'Gerência de Projetos',
          'Marketing',
          'Pesquisa e Desenvolvimento',
          'SGQ',
          'Suprimentos',
          'TI'
        ],
        Almoxarifado: [
          'Almoxarifado',
          'Chaparia',
          'Magazine'
        ],
        'Area Externa': [
          'Área Externa',
          'Banker',
          'Estacionamento',
          'FAT',
          'Montagem de Andaimes',
          'Oficina de Excelência Operacional',
          'Sala de Treinamento'
        ],
        Calderaria: [
          'CD - Centro de Distribuição',
          'Célula A',
          'Célula B',
          'Célula ME',
          'Célula Robotizada',
          'Célula T',
          'Centro Tecnológico Soldagem',
          'Forno'
        ],
        CQ: [
          'CQ Documental',
          'CQ Fábrica'
        ],
        'Field Service': [
          'Administrativo',
          'Almoxarifado',
          'DOW',
          'Obra Coifa',
          'Saipem Guarujá-SP'
        ],
        Logística: [
          'Expedição',
          'Operadores de ponte',
          'Serviços Gerais'
        ],
        Manutenção: [
          'Manutenção',
          'Terceiros'
        ],
        'Montagem de Campo': [
          'Montagem de Estacas'
        ],
        'Montagem Mecanica': [
          'Montagem Mecanica'
        ],
        Pintura: [
          'Pintura'
        ],
        'Produtivo Indireto': [
          'Engenaria Industria Usinagem',
          'Engenharia de Calderaria',
          'Engenharia de Materiais e Solda',
          'Engenaria de Usinagem',
          'Engenharia Industrial Mecanica',
          'Excelência Operaciona',
          'Gerência da Produção',
          'Melhoria de Manufatura',
          'Metrologia',
          'PCP',
          'SESMT',
          'SGA'
        ],
        Terceiros: [
          'Clientes Residente',
          'Cliente Visitante',
          'Conservação e Limpeza',
          'Fretamento (Allure)',
          'Portaria',
          'Restaurante',
          'Vigilancia e Portaria'
        ],
        Usinagem: [
          'Ferramentaria',
          'Leve',
          'Pesada'
        ]
      },
      Contagem: 'Vespasiano',
      'Porto Açu': {
        Cais: [
          'Montagem/Soldagem'
        ],
        'Galpão Delp Açu': [
          'Administrativo',
          'Árae de Produção',
          'Manutenção',
          'Montagem/Mov de Carga',
          'Soldagem'
        ],
        'Montagem Externa': [
          'Jumper Niterói/ Bacalhau'
        ]
      }
    };

    const PRATICA = {
      'A. Reação das Pessoas': [
        'A.1 Mudança de Posição',
        'A.2 Parando o Serviço',
        'A.3 Ajustando o EPI',
        'A.4 Adequando o Serviço'
      ],
      'B. Posição das Pessoas': [
        'B.1 Bater Contra / Ser Atingido por',
        'B.2 Ficar Preso',
        'B.3 Risco de Queda',
        'B.4 Risco de Queimadura',
        'B.5 Risco de Choque Elétrico',
        'B.6 Inalar Contaminante',
        'B.7 Absorver Contaminantes',
        'B.8 Ingerir Contaminantes',
        'B.9 Postura Inadequada',
        'B.10 Esforço Inadequado'
      ],
      'C. EPIs': [
        'C.1 Cabeça',
        'C.2 Sistema Respiratório',
        'C.3 Olhos e Rosto',
        'C.4 Ouvidos',
        'C.5 Mãos e Braços',
        'C.6 Tronco',
        'C.7 Pés e Pernas'
      ],
      'D. Ferramentas e Equipamentos': [
        'D.1 Impróprias para o Serviço',
        'D.2 Usadas Incorretamente',
        'D.3 Em Condições Inseguras'
      ],
      'E. Procedimentos': [
        'E.1 Inadequados',
        'E.2 Não Existem Procedimentos Escritos',
        'E.3 Adequados e Não Seguidos'
      ],
      'F. Ordem, Limpeza e Arrumação': [
        'F.1 Local Sujo',
        'F.2 Local Desorganizado',
        'F.3 Local com Vazamento e Poluição Ambiental'
      ]
    };

    const resolveUnitMap = (unit) => {
      if (!unit) return null;
      const unitMap = MAP[unit];
      if (!unitMap) return null;
      if (typeof unitMap === 'string') {
        return MAP[unitMap] || null;
      }
      return unitMap;
    };

    const resetSelect = (select, disabled = true) => {
      select.empty();
      select.append(new Option('Selecione', ''));
      select.prop('disabled', disabled);
    };

    const fillSelect = (select, items = []) => {
      resetSelect(select, false);
      items.forEach((item) => {
        select.append(new Option(item, item));
      });
    };

    $(document).ready(() => {
      const unidadeSelect = $('#unidadeSelect');
      const setorSelect = $('#setorSelect');
      const subsetorSelect = $('#subsetorSelect');
      const categoriaInseguraSelect = $('#categoriaInseguraSelect');
      const subcategoriaInseguraSelect = $('#subcategoriaInseguraSelect');

      resetSelect(setorSelect, true);
      resetSelect(subsetorSelect, true);
      resetSelect(categoriaInseguraSelect, false);
      resetSelect(subcategoriaInseguraSelect, true);

      Object.keys(PRATICA).forEach((categoria) => {
        categoriaInseguraSelect.append(new Option(categoria, categoria));
      });

      unidadeSelect.on('change', () => {
        const unidade = unidadeSelect.val();
        resetSelect(setorSelect, true);
        resetSelect(subsetorSelect, true);

        const unitMap = resolveUnitMap(unidade);
        if (!unitMap) return;
        fillSelect(setorSelect, Object.keys(unitMap));
      });

      setorSelect.on('change', () => {
        const unidade = unidadeSelect.val();
        const setor = setorSelect.val();
        resetSelect(subsetorSelect, true);

        const unitMap = resolveUnitMap(unidade);
        if (!unitMap || !setor) return;
        fillSelect(subsetorSelect, unitMap[setor] || []);
      });

      categoriaInseguraSelect.on('change', () => {
        const categoria = categoriaInseguraSelect.val();
        const subs = PRATICA[categoria] || [];
        resetSelect(subcategoriaInseguraSelect, true);
        subs.forEach((subcategoria) => {
          subcategoriaInseguraSelect.append(new Option(subcategoria, subcategoria));
        });
        if (subs.length > 0) {
          subcategoriaInseguraSelect.prop('disabled', false);
          if (subs.length === 1) {
            subcategoriaInseguraSelect.val(subs[0]);
          }
        }
      });
    });
  </script>
  <script>
    const formElement = document.getElementById('poc-form');
    const requiredModalElement = document.getElementById('requiredFieldsModal');
    const requiredFieldsList = document.getElementById('requiredFieldsList');
    const requiredModal = requiredModalElement ? new bootstrap.Modal(requiredModalElement) : null;

    const REQUIRED_FIELDS = {
      basico: [
        { label: 'Unidade', selectors: ['#unidadeSelect', '[name="unidade"]'] },
        { label: 'Setor', selectors: ['#setorSelect', '[name="setor"]'] },
        { label: 'Subsetor', selectors: ['#subsetorSelect', '[name="subsetor"]'] },
        { label: 'Observador', selectors: ['#observadorSelect', '#observador', '[name="observador"]'] },
        { label: 'Data', selectors: ['#dataInput', '#data', '[name="data"]'] },
        { label: 'Hora início', selectors: ['#horaInicioInput', '#hora', '[name="horaInicio"]'] },
        { label: 'Hora fim', selectors: ['#horaFimInput', '[name="horaFim"]'] },
        { label: 'Pessoas observadas', selectors: ['#pessoasObservadasInput', '#pessoas-observadas', '[name="pessoasObservadas"]'] },
        { label: 'Pessoas na área', selectors: ['#pessoasNaAreaInput', '#pessoas-area', '[name="pessoasNaArea"]'] }
      ],
      pratica: [
        { label: 'Categoria', selectors: ['#categoriaInseguraSelect', '[name="categoriaInsegura"]'] },
        { label: 'Subcategoria', selectors: ['#subcategoriaInseguraSelect', '[name="subcategoriaInsegura"]'] }
      ]
    };

    const getFieldBySelectors = (selectors) => {
      if (!formElement) return null;
      return selectors
        .map((selector) => formElement.querySelector(selector))
        .find((field) => field);
    };

    const getCurrentContext = () => {
      const activeTab = document.querySelector('.tab.is-active');
      const tabName = activeTab ? activeTab.dataset.tab : 'basicos';
      if (tabName === 'inseguras') return 'pratica';
      if (tabName === 'basicos') return 'basico';
      return '';
    };

    const validateRequired = (context) => {
      const resolvedContext = context === 'currentTab' ? getCurrentContext() : context;
      const fields = REQUIRED_FIELDS[resolvedContext] || [];
      const missing = [];

      fields.forEach(({ label, selectors }) => {
        const field = getFieldBySelectors(selectors);
        if (!field) return;
        const value = typeof field.value === 'string' ? field.value.trim() : field.value;
        if (!value || value === 'Selecione') {
          missing.push(label);
        }
      });

      return { ok: missing.length === 0, missing };
    };

    const showRequiredModal = (missing) => {
      if (!requiredModal) return;
      if (requiredFieldsList) {
        requiredFieldsList.innerHTML = '';
        if (missing && missing.length > 0) {
          missing.forEach((label) => {
            const li = document.createElement('li');
            li.textContent = label;
            requiredFieldsList.appendChild(li);
          });
          requiredFieldsList.classList.remove('d-none');
        } else {
          requiredFieldsList.classList.add('d-none');
        }
      }
      requiredModal.show();
    };

    document.querySelectorAll('.tab').forEach((tab) => {
      tab.addEventListener(
        'click',
        (event) => {
          if (tab.classList.contains('is-disabled')) {
            return;
          }
          const activeTab = document.querySelector('.tab.is-active');
          if (activeTab && activeTab !== tab) {
            const result = validateRequired('currentTab');
            if (!result.ok) {
              event.preventDefault();
              event.stopImmediatePropagation();
              showRequiredModal(result.missing);
            }
          }
        },
        true
      );
    });

    const addButton = document.getElementById('add-btn');
    if (addButton) {
      addButton.addEventListener(
        'click',
        (event) => {
          const result = validateRequired('currentTab');
          if (!result.ok) {
            event.preventDefault();
            event.stopImmediatePropagation();
            showRequiredModal(result.missing);
          }
        },
        true
      );
    }
  </script>
  <script src="assets/js/app.js"></script>
</body>
</html>
